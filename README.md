# valorant-match-schedule

You can check the worldwide VALORANT match schedule in Google Calendar.

## Public URL

https://valorant-calendar.mizt.ch/

> [!TIP]
> - `International` calendar contains all VCT international matches and some community events.
> - All Calendars except `International` contain tier-1 and tier-2 matches played in the region.

| Region | Google Calendar | iCal(`.ics`) |
| :---:|:---:|:---:|
| International | [Google Calendar](https://calendar.google.com/calendar/u/0?cid=ZjJiMjY1MTkwZmNkMDY5NjY5M2FiZjgwODE1OGRkZDQ1MTQwNjY1ZGRkMGM1YjM3YWFhYTA0ZGJjZDYxZWFhOEBncm91cC5jYWxlbmRhci5nb29nbGUuY29t) | [.iCal](https://calendar.google.com/calendar/ical/f2b265190fcd0696693abf808158ddd45140665ddd0c5b37aaaa04dbcd61eaa8%40group.calendar.google.com/public/basic.ics) |
| Americas | [Google Calendar](https://calendar.google.com/calendar/u/0?cid=YmRkZTBmNWZhYTQ2ZTQxZGRmYWJkZTJmYjhlZDZhZTcxOTdiNjQ2MTQyYjhlZDAzOTdmMGE0ZjBiYmQxMDlmNEBncm91cC5jYWxlbmRhci5nb29nbGUuY29t) | [.iCal](https://calendar.google.com/calendar/ical/bdde0f5faa46e41ddfabde2fb8ed6ae7197b646142b8ed0397f0a4f0bbd109f4%40group.calendar.google.com/public/basic.ics) |
| EMEA | [Google Calendar](https://calendar.google.com/calendar/u/0?cid=OWNjOGI0YmIwMjFiMDE5NGIyNDEzOWRiMjU1NjFmYTc0ZGVhYTc0MzU0YWY1NDkzMDFiNDRhZWNjOTJiMzJiOUBncm91cC5jYWxlbmRhci5nb29nbGUuY29t) | [.iCal](https://calendar.google.com/calendar/ical/9cc8b4bb021b0194b24139db25561fa74deaa74354af549301b44aecc92b32b9%40group.calendar.google.com/public/basic.ics) |
| Pacific | [Google Calendar](https://calendar.google.com/calendar/u/0?cid=N2EzN2YxZmYzMzdiODBmOWRiOWFhOGVhNWQ2ZDBiYWY5ODE4MDM0YmIyMDhiNDAyNWUzNDFjNGE3NTMyMTE5OUBncm91cC5jYWxlbmRhci5nb29nbGUuY29t) | [.iCal](https://calendar.google.com/calendar/ical/7a37f1ff337b80f9db9aa8ea5d6d0baf9818034bb208b4025e341c4a75321199%40group.calendar.google.com/public/basic.ics) |
| China | [Google Calendar](https://calendar.google.com/calendar/u/0?cid=ODFhYjAxZTQ1ZmNiNGY5MjViNzZmOTdmYjA0MjA3Mjc3MjUxZjhhM2FhMDUyMGYxMDA3MmUzYzBhMjQyMTdjNEBncm91cC5jYWxlbmRhci5nb29nbGUuY29t) | [.iCal](https://calendar.google.com/calendar/ical/81ab01e45fcb4f925b76f97fb04207277251f8a3aa0520f10072e3c0a24217c4%40group.calendar.google.com/public/basic.ics) |

> [!WARNING]
> - Below are scheduled to be discontinued or removed in the near future
> - I recommend that you replace each of them by subscribing to a new calendar that will replace it.

| Region | Google Calendar | iCal(`.ics`) | Migration guide
| :---:|:---:|:---:|:---:|
| NA | [Google Calendar](https://calendar.google.com/calendar/u/0?cid=NDg2OTg5YjJjYTEwZTk5OGVlODU4YTcyMDRiMTNjZDkzNWQ0MTFmMjlkYzA4MzA1ZGJiZDFjNDIzN2YyYTIxZEBncm91cC5jYWxlbmRhci5nb29nbGUuY29t) | [iCal](https://calendar.google.com/calendar/ical/486989b2ca10e998ee858a7204b13cd935d411f29dc08305dbbd1c4237f2a21d%40group.calendar.google.com/public/basic.ics) | All events in this calendar are also included in `Americas`. |
| Brazil / LATAM | [Google Calendar](https://calendar.google.com/calendar/u/0?cid=NTNjYTg1NDZhNGQzM2IzMTkzNmVkMjA0NjE2NmY2OTA2ODc1YzhiMzM3N2JhOThiOWFkMWJhZjNhMDQwZjA3NUBncm91cC5jYWxlbmRhci5nb29nbGUuY29t) | [iCal](https://calendar.google.com/calendar/ical/53ca8546a4d33b31936ed2046166f6906875c8b3377ba98b9ad1baf3a040f075%40group.calendar.google.com/public/basic.ics) | All events in this calendar are also included in `Americas`. |
| APAC | [Google Calendar](https://calendar.google.com/calendar/u/0?cid=YTZiOWM3ZGI5YzdmM2U2YjFmNjNmMjc4MjhkMzM0ZjQ0NTFhZDI0ZGU1NzA0YjI4YTk5YzU1ZGEwNjk5YjdiZkBncm91cC5jYWxlbmRhci5nb29nbGUuY29t) | [iCal](https://calendar.google.com/calendar/ical/a6b9c7db9c7f3e6b1f63f27828d334f4451ad24de5704b28a99c55da0699b7bf%40group.calendar.google.com/public/basic.ics) | All events in this calendar are also included in `Pacific`. |
| East Asia | [Google Calendar](https://calendar.google.com/calendar/u/0?cid=MWEyMWYzYWFlMDRjYWJiODQxNDFlOGE1ZjRhYTRjZTA4NWNmMzZlNDA0YjQyOGIzYjZjNzYxMWE4MTllZjczMkBncm91cC5jYWxlbmRhci5nb29nbGUuY29t) | [iCal](https://calendar.google.com/calendar/ical/1a21f3aae04cabb84141e8a5f4aa4ce085cf36e404b428b3b6c7611a819ef732%40group.calendar.google.com/public/basic.ics) | All events in this calendar are also included in `Pacific`. |

## Architecture overview
![architecture](image/valorant-match-schedule.drawio.svg)

1. Lambda function: `get-match-list` is periodically invoked from EventBridge
2. `get-match-list` decides which day to fetch match information, and publishes records including specified date strings to SQS queue: `FetchDailyMatches`
3. `fetch-daily-matches` is triggered by `FetchDailyMatches` queue, fetches match data for a day from API service and puts into DynamoDB table: `MatchList`
4. `MatchList` table stream captures item-level data modification to Lambda function: `add-gcal-event`
5. `add-gcal-event` creates/modifies Google Calendar events. `Outbox` table manages their state and information.

## Prerequisites

If you want to do it yourself, you should be ready with:
- service account keys for Google Cloud IAM ( `service_account_key.json` ): see [here](https://cloud.google.com/iam/docs/creating-managing-service-account-keys)

    ```bash
    git clone https://github.com/miztch/valorant-match-schedule
    cp service_account_key.json valorant-match-schedule/add-gcal-event/function/service_account_key.json
    ```
- calendars and their ids for each region: see [here](https://docs.simplecalendar.io/find-google-calendar-id/)
  - 9 calendars are needed for each region.

## Provisioning

You can use [AWS SAM](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-install.html) to provision this application.
- Templates are nested, so you have to execute `sam deploy` only once

```bash
cd valorant-match-schedule/
sam build
sam deploy --guided --capabilities CAPABILITY_IAM CAPABILITY_AUTO_EXPAND
```
